"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2981],{2981:function(e,i,l){l.r(i),l.d(i,{default:function(){return p}});var n=l(85893),t=l(1864),r=l(67294);let a=l(10508).ZP.div(["#vimjs-canvas{image-rendering:pixelated;}#vimjs-container{height:100%;width:100%;}#vimjs-file{display:none;}#vimjs-font-test{position:absolute;visibility:hidden;}"]);var o=l(96189),u=l(45279),s=l(44696),d=l(20063),c=l(58437),v=l(97836),m=l(6484),f=l(48764).Buffer,p=({id:e})=>{let{closeWithTransition:i,processes:{[e]:l}}=(0,c.z)(),{readFile:p,updateFolder:w,writeFile:h}=(0,d.o)(),b=(0,o.Z)(),{prependFileToTitle:$}=(0,s.Z)(e),{libs:y=[],url:M=""}=l||{},[V,j]=(0,r.useState)([]),g=(0,r.useRef)(!1),x=(0,r.useCallback)(async()=>{var l,n,r;let a=M||v.$Z,[,...o]=a.split("/"),u="";1===o.length&&(u="/root"),window.VimWrapperModule={},await (0,m.mb)(y,!1,!!window.VimWrapperModule);let s=M?await p(a):f.from("");null===(r=window.VimWrapperModule)||void 0===r||null===(n=r.init)||void 0===n||n.call(r,{VIMJS_ALLOW_EXIT:!0,arguments:[`${u}${a}`],containerWindow:null===(l=document.querySelector("#vimjs-container"))||void 0===l?void 0:l.closest("section"),memoryInitializerPrefixURL:"/daedal-os/Program Files/Vim.js/",postRun:[()=>{var e,i;g.current=!1,b(null===(i=window.VimWrapperModule)||void 0===i?void 0:null===(e=i.VimModule)||void 0===e?void 0:e.FS,"Vim")}],preRun:[()=>{let e="";[u,...o].forEach((i,l,{[l+1]:n})=>{var t,r,a,u,d,c;n&&l+1!==o.length?(null===(a=window.VimWrapperModule)||void 0===a||null===(r=a.VimModule)||void 0===r||null===(t=r.FS_createPath)||void 0===t||t.call(r,e,n,!0,!0),e+=`/${n}`):e?null===(c=window.VimWrapperModule)||void 0===c||null===(d=c.VimModule)||void 0===d||null===(u=d.FS_createDataFile)||void 0===u||u.call(d,e,i,s,!0,!0):e=i})}],print:console.info,printErr:console.info,quitCallback:()=>i(e),writeCallback:e=>j(i=>[...i,{buffer:f.from(e),url:a}])}),$((0,t.basename)(a))},[i,e,y,b,$,p,M]);return(0,r.useEffect)(()=>{V.length>0&&([...V].forEach(({buffer:e,url:i})=>{h(i,e,!0),w((0,t.dirname)(i),(0,t.basename)(i))}),j([]))},[w,V,h]),(0,r.useEffect)(()=>(g.current||(g.current=!0,x()),()=>{var e,i,l,n,t,r;!g&&(null===(l=window.VimWrapperModule)||void 0===l?void 0:null===(i=l.VimModule)||void 0===i?void 0:null===(e=i.asmLibraryArg)||void 0===e?void 0:e._vimjs_prepare_exit())&&(null===(r=window.VimWrapperModule)||void 0===r||null===(t=r.VimModule)||void 0===t||null===(n=t.exit)||void 0===n||n.call(t))}),[x]),(0,n.jsxs)(a,{children:[(0,n.jsx)("div",{id:"vimjs-container",...(0,u.Z)({id:e}),children:(0,n.jsx)("canvas",{id:"vimjs-canvas",onContextMenuCapture:m.nK})}),(0,n.jsx)("div",{id:"vimjs-font-test"})]})}},96189:function(e,i,l){var n=l(67294),t=l(20063);i.Z=()=>{let{mountEmscriptenFs:e,unMapFs:i,updateFolder:l}=(0,t.o)(),r=(0,n.useRef)();return(0,n.useEffect)(()=>()=>{if(r.current){let e=r.current;r.current="",i(e,!0).then(()=>l("/",void 0,e)).catch(()=>{})}},[i,l]),(0,n.useCallback)(async(i,n)=>{if(!i)return;let t="";try{t=await e(i,n)}catch{}t&&(l("/",t),r.current=t)},[e,l])}},45279:function(e,i,l){var n=l(1864),t=l(67294),r=l(59746),a=l(23736),o=l(89670),u=l(20063),s=l(58437),d=l(76488),c=l(97836),v=l(6484);i.Z=({callback:e,directory:i=c.Ll,id:l,onDragLeave:m,onDragOver:f,updatePositions:p})=>{let{url:w}=(0,s.z)(),{iconPositions:h,sortOrders:b,setIconPositions:$}=(0,d.k)(),{exists:y,mkdirRecursive:M,updateFolder:V,writeFile:j}=(0,u.o)(),g=(0,t.useCallback)(async(e,i,t)=>{if(l){if(i){let r=(0,n.join)(c.Ll,e);if(await M(c.Ll),await j(r,i,!0))return t===o.v.UPDATE_URL&&w(l,r),V(c.Ll,e),(0,n.basename)(r)}else t===o.v.UPDATE_URL&&w(l,e)}return""},[l,M,V,w,j]),{openTransferDialog:x}=(0,r.Z)();return{onDragLeave:m,onDragOver:e=>{null==f||f(e),(0,v.nK)(e)},onDrop:t=>{if(!c.my.has((0,v.RT)(i))){if(p&&t.target instanceof HTMLElement){let{files:e,text:l}=(0,a.p4)(t);if(0===e.length&&""===l)return;let r={x:t.clientX,y:t.clientY},o=[];if(l){try{o=JSON.parse(l)}catch{}if(!Array.isArray(o))return;let[e]=o;if(!e||e.startsWith(i)&&(0,n.basename)(e)===(0,n.relative)(i,e))return;o=o.map(e=>(0,n.basename)(e))}else e instanceof FileList?o=[...e].map(e=>e.name):o=[...e].map(e=>{var i;return(null===(i=e.getAsFile())||void 0===i?void 0:i.name)||""}).filter(Boolean);o=o.map(e=>{if(!h[`${i}/${e}`])return e;let l=0,t="";do l+=1,t=`${i}/${(0,n.basename)(e,(0,n.extname)(e))} (${l})${(0,n.extname)(e)}`;while(h[t]);return(0,n.basename)(t)}),(0,v.vi)(i,t.target,h,b,r,o,$,y)}(0,a.WG)(t,e||g,i,x,!!l)}}}}},44696:function(e,i,l){var n=l(67294),t=l(58437),r=l(37176),a=l(97836);i.Z=e=>{let{title:i}=(0,t.z)(),[l]=e.split(a.CC),{title:o}=r.Z[l]||{};return{appendFileToTitle:(0,n.useCallback)((l,n)=>{let t=l?` - ${l}${n?` ${a.xy}`:""}`:"";i(e,`${o}${t}`)},[e,o,i]),prependFileToTitle:(0,n.useCallback)((l,n,t)=>{let r=l?`${n?`${a.xy} `:""}${l}${t?" ":" - "}`:"";i(e,`${r}${o}`)},[e,o,i])}}}}]);