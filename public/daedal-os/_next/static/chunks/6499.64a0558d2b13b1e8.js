"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6499,3333],{16499:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i=n(85893),r=n(10508);let a=r.ZP.div(["display:flex;place-content:center;canvas{background-color:#000;height:100%;width:100%;}"]);var o=n(67294),l=n(96189),s=n(58437),c=n(76488),u=n(97836),f=n(6484),d=({containerRef:e,id:t,setLoading:n,loading:i})=>{let{processes:{[t]:a}={}}=(0,s.z)(),{componentWindow:d,defaultSize:w={height:0,width:0},libs:h=[],maximized:v=!1}=a||{},{windowStates:{[t]:m}}=(0,c.k)(),{sizes:{titleBar:p}}=(0,r.Fg)(),y=(0,o.useRef)(!1),g=(0,l.Z)(),{size:b}=m||{};(0,o.useEffect)(()=>{i&&(0,f.mb)(h).then(()=>{window.ioq3&&(window.ioq3.viewport=e.current,window.ioq3.elementPointerLock=!0,window.ioq3.callMain([]),n(!1),g(window.FS,"Quake3"))})},[e,h,i,g,n]),(0,o.useEffect)(()=>{window.ioq3&&setTimeout(()=>{var e;y.current=v;let{height:t,width:n}=!v&&b||(null==d?void 0:d.getBoundingClientRect())||{};if(!t||!n)return;let i=w?(0,f.Vy)(w.width)/(0,f.Vy)(w.height):4/3,r=(0,f.Vy)(n),a=r>(0,f.Vy)(t)-p.height,o=v&&a?r/i:r,l=o/i;l>0&&o>0&&(null===(e=window.ioq3)||void 0===e?void 0:e.canvas)&&(window.ioq3.setCanvasSize(o,l),window.ioq3.canvas.setAttribute("style",`object-fit: ${a?"contain":"scale-down"}`))},v||y.current?u.jx.WINDOW+10:0)},[d,w,v,b,p.height]),(0,o.useEffect)(()=>()=>{var e,t;try{null===(t=window.ioq3)||void 0===t||t.exit()}catch{}null===(e=window.AL)||void 0===e||e.contexts.forEach(({ctx:e})=>e.close())},[])},w=n(7443),h=({id:e})=>(0,i.jsx)(w.Z,{StyledComponent:a,id:e,useHook:d})},7443:function(e,t,n){var i=n(85893),r=n(67294),a=n(33333),o=n(45279),l=n(58437);t.Z=(0,r.memo)(({id:e,useHook:t,StyledComponent:n,children:s})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.z)(),u=(0,r.useRef)(null),[f,d]=(0,r.useState)(!0),w=(0,r.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:u,id:e,loading:f,setLoading:d,url:c}),(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsx)(a.default,{}),(0,i.jsx)(n,{ref:u,style:w,...(0,o.Z)({id:e}),children:s})]})})},33333:function(e,t,n){n.r(t);let i=n(10508).ZP.div(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}']);t.default=i},96189:function(e,t,n){var i=n(67294),r=n(20063);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.o)(),a=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(a.current){let e=a.current;a.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(n("/",r),a.current=r)},[e,n])}},45279:function(e,t,n){var i=n(1864),r=n(67294),a=n(59746),o=n(23736),l=n(89670),s=n(20063),c=n(58437),u=n(76488),f=n(97836),d=n(6484);t.Z=({callback:e,directory:t=f.Ll,id:n,onDragLeave:w,onDragOver:h,updatePositions:v})=>{let{url:m}=(0,c.z)(),{iconPositions:p,sortOrders:y,setIconPositions:g}=(0,u.k)(),{exists:b,mkdirRecursive:x,updateFolder:k,writeFile:E}=(0,s.o)(),L=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let a=(0,i.join)(f.Ll,e);if(await x(f.Ll),await E(a,t,!0))return r===l.v.UPDATE_URL&&m(n,a),k(f.Ll,e),(0,i.basename)(a)}else r===l.v.UPDATE_URL&&m(n,e)}return""},[n,x,k,m,E]),{openTransferDialog:q}=(0,a.Z)();return{onDragLeave:w,onDragOver:e=>{null==h||h(e),(0,d.nK)(e)},onDrop:r=>{if(!f.my.has((0,d.RT)(t))){if(v&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,o.p4)(r);if(0===e.length&&""===n)return;let a={x:r.clientX,y:r.clientY},l=[];if(n){try{l=JSON.parse(n)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;l=l.map(e=>(0,i.basename)(e))}else e instanceof FileList?l=[...e].map(e=>e.name):l=[...e].map(e=>{var t;return(null===(t=e.getAsFile())||void 0===t?void 0:t.name)||""}).filter(Boolean);l=l.map(e=>{if(!p[`${t}/${e}`])return e;let n=0,r="";do n+=1,r=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${n})${(0,i.extname)(e)}`;while(p[r]);return(0,i.basename)(r)}),(0,d.vi)(t,r.target,p,y,a,l,g,b)}(0,o.WG)(r,e||L,t,q,!!n)}}}}}}]);