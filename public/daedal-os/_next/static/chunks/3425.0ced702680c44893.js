"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3425,3333,5653],{45653:function(e,t,r){r.r(t),r.d(t,{Back:function(){return i},Down:function(){return s},Forward:function(){return o},Refresh:function(){return a},Search:function(){return c},Up:function(){return u}});var n=r(85893),l=r(67294);let i=(0,l.memo)(()=>(0,n.jsx)("svg",{viewBox:"-8 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M32 14v4H7.656l7.172 7.172L12 28 0 16 12 4l2.828 2.828L7.656 14H32z"})})),o=(0,l.memo)(()=>(0,n.jsx)("svg",{viewBox:"8 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"m20 4 12 12-12 12-2.828-2.828L24.344 18H0v-4h24.344l-7.172-7.172L20 4z"})})),a=(0,l.memo)(()=>(0,n.jsx)("svg",{viewBox:"-10 -13 52 52",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M20.266.594q2.594.703 4.75 2.195t3.711 3.531 2.414 4.516T32 16q0 2.203-.57 4.25t-1.609 3.828-2.5 3.242-3.242 2.5-3.828 1.609-4.25.57-4.25-.57-3.828-1.609-3.242-2.5-2.5-3.242-1.609-3.82T.002 16q0-2.188.578-4.25t1.648-3.883T4.83 4.554t3.453-2.555H4.002v-2h8v8h-2V3.358q-1.828.875-3.305 2.195T4.174 8.522t-1.609 3.555-.563 3.922q0 1.922.5 3.711t1.414 3.344 2.195 2.836 2.836 2.195 3.336 1.414 3.719.5q1.922 0 3.711-.5t3.344-1.414 2.836-2.195 2.195-2.836 1.414-3.336.5-3.719q0-2.344-.758-4.516T27.127 7.53t-3.242-3.086-4.148-1.93l.531-1.922z"})})),s=(0,l.memo)(({flip:e})=>{let t=(0,l.useMemo)(()=>e?{transform:"scaleY(-1)",transition:"all 0.2s"}:void 0,[e]);return(0,n.jsx)("svg",{style:t,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"m28.109 5.453 3.781 3.766L15.999 25.11.108 9.219l3.781-3.766 12.109 12.109L28.107 5.453z"})})}),u=(0,l.memo)(()=>{let e=(0,l.useMemo)(()=>({marginTop:"-1px"}),[]);return(0,n.jsx)("svg",{style:e,viewBox:"0 -7 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"m16 0 12 12-2.828 2.828L18 7.656V32h-4V7.656l-7.172 7.172L4 12 16 0z"})})}),c=(0,l.memo)(()=>(0,n.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M21 0q1.516 0 2.922.391T26.547 1.5t2.227 1.727 1.727 2.227 1.109 2.625.391 2.922-.391 2.922-1.109 2.625-1.727 2.227-2.227 1.727-2.625 1.109-2.922.391q-1.953 0-3.742-.656t-3.289-1.891L1.703 31.705q-.297.297-.703.297t-.703-.297T0 31.002t.297-.703l12.25-12.266q-1.234-1.5-1.891-3.289T10 11.002q0-1.516.391-2.922T11.5 5.455t1.727-2.227 2.227-1.727T18.079.392t2.922-.391zm0 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T30 11t-.711-3.5-1.93-2.859-2.859-1.93T21 2t-3.5.711-2.859 1.93-1.93 2.859T12 11t.711 3.5 1.93 2.859 2.859 1.93T21 20z"})}))},43425:function(e,t,r){r.r(t),r.d(t,{default:function(){return P}});var n=r(85893),l=r(1864),i=r(67294),o=r(45653),a=r(10508);let s=a.ZP.div(["background-position:2px 5px;background-repeat:no-repeat;background-size:16px;border:1px solid rgb(83,83,83);display:flex;height:","px;margin:7px 12px 6px 5px;padding:0 22px 2px 25px;position:relative;width:100%;input{background-color:rgb(25,25,25);border-right:1px solid rgb(21,21,21);color:#fff;font-family:",";font-size:12px;font-weight:400;height:","px;padding-bottom:1px;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 2px);}img{left:2px;position:absolute;top:3px;}.refresh{background-color:rgb(25,25,25);display:flex;height:","px;margin:0;place-content:center;place-items:center;position:absolute;right:0;stroke:rgb(128,128,128);stroke-width:3;top:0;width:24px;&:hover{background-color:rgb(27,41,49);border:1px solid rgb(34,114,153);}&:active{background-color:rgb(28,57,71);border:1px solid rgb(38,160,218);}svg{position:relative;top:-1px;}}"],({theme:e})=>e.sizes.fileExplorer.navInputHeight,({theme:e})=>e.formats.systemFont,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2);var u=r(7502),c=e=>{let{contextMenu:t}=(0,u.H)();return(0,i.useMemo)(()=>null==t?void 0:t(()=>[{action:()=>{var t;return null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(e)},label:"Copy address"}]),[e,t])},d=r(20063),A=r(58437),p=r(67278),g=r(46581),h=r(97836),f=r(6484);let v=(0,i.forwardRef)(({id:e},t)=>{let{url:r,processes:{[e]:{icon:a,url:u=""}}}=(0,A.z)(),v=(0,l.basename)(u)||h.SP,[x,m]=(0,i.useState)(v),{exists:w,updateFolder:b}=(0,d.o)();return(0,i.useEffect)(()=>{if(t.current){if(x===u)t.current.select();else if(x===v){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}else document.activeElement!==t.current&&m(v)}},[x,t,v,u]),(0,n.jsxs)(s,{children:[(0,n.jsx)(g.Z,{alt:v,imgSize:16,src:a}),(0,n.jsx)("input",{ref:t,"aria-label":"Address",enterKeyHint:"go",onBlurCapture:()=>m(v),onChange:({target:e})=>m(e.value),onFocusCapture:()=>m(u),onKeyDown:async({key:n})=>{if("Enter"===n&&t.current){let{value:n}=t.current;n&&await w(n)&&r(e,n),t.current.blur()}},spellCheck:!1,type:"text",value:x,...c(u)}),(0,n.jsx)(p.Z,{className:"refresh",onClick:()=>b(u),...(0,f.PS)(`Refresh "${v}" (F5)`),children:(0,n.jsx)(o.Refresh,{})})]})}),x=a.ZP.div(["border:1px solid rgb(83,83,83);display:flex;height:","px;margin:7px 12px 6px 0;max-width:148px;overflow:hidden;padding:0;position:relative;width:100%;svg{display:none;}input{appearance:none;background-color:rgb(25,25,25);color:#fff;font-family:",";font-size:12px;font-weight:400;height:","px;padding-bottom:1px;padding-left:8px;text-overflow:ellipsis;white-space:nowrap;width:100%;&::-webkit-search-cancel-button{filter:invert(1);padding-right:4px;}}input:placeholder-shown ~ svg{display:block;fill:rgb(113,113,113);height:12px;pointer-events:none;position:absolute;right:6px;stroke:rgb(113,113,113);stroke-width:1;top:5px;width:12px;}"],({theme:e})=>e.sizes.fileExplorer.navInputHeight,({theme:e})=>e.formats.systemFont,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2);var m=r(93949),w=r(76488),b=r(82883),k=(0,i.memo)(({id:e})=>{let[t,r]=(0,i.useState)(""),a=(0,i.useRef)(!1),{open:s,processes:{[e]:{url:c=""}}}=(0,A.z)(),p=(0,i.useRef)(null),g=(0,b.Rx)(t),{contextMenu:v}=(0,u.H)(),{fs:k}=(0,d.o)(),{updateRecentFiles:E}=(0,w.k)();return(0,i.useEffect)(()=>{p.current&&a.current&&Promise.all([...g.filter(({ref:e})=>e.startsWith(c)),...g.filter(({ref:e})=>!e.startsWith(c))].slice(0,9).map(async({ref:e})=>{let{icon:t,url:n,pid:i=""}=await (0,m.A4)(k,e)||{};return{action:()=>{s(i,{url:n}),r(""),p.current&&(p.current.value="",p.current.blur()),n&&i&&E(n,i)},icon:t,label:(0,l.basename)(e,h.zm),tooltip:e}})).then(e=>{var t,r;if((null===(t=p.current)||void 0===t?void 0:t.value)||0===e.length){let t=null===(r=p.current)||void 0===r?void 0:r.getBoundingClientRect();null==v||v(()=>e).onContextMenuCapture(void 0,t,{staticY:((null==t?void 0:t.y)||0)+((null==t?void 0:t.height)||0)})}})},[v,k,s,g,E,c]),(0,i.useEffect)(()=>{p.current&&(p.current.value="",r(""))},[c]),(0,n.jsxs)(x,{children:[(0,n.jsx)("input",{ref:p,onChange:({target:e})=>{a.current=!0,r(e.value)},onFocus:()=>(0,f.Q4)([b.VU,b.cM]),placeholder:"Search",...b.hZ}),(0,n.jsx)(o.Search,{})]})});let E=a.ZP.nav(["background-color:rgb(25,25,25);display:flex;height:",';button{height:16px;margin:11px 9px;width:16px;svg{color:#fff;fill:currentColor;height:16px;transition:color 0.35s ease;width:16px;&:hover{color:rgb(50,152,254);}&:active{color:rgb(54,116,178);transition:none;}}&[title^="Up"]{margin-right:8px;position:relative;right:-8px;top:-1px;}&[title="Recent locations"]{left:55px;position:absolute;svg{stroke:currentColor;stroke-width:3px;width:7px;}}&:disabled{svg{color:rgb(140,140,140);&:hover,&:active{color:rgb(140,140,140);}}}}'],({theme:e})=>e.sizes.fileExplorer.navBarHeight);var C=r(64146),y=r(32221),S=r(72490);let j=(0,i.forwardRef)(({hideSearch:e,id:t},r)=>{let{url:a,processes:{[t]:{url:s=""}}}=(0,A.z)(),c="/"===s?"":(0,l.basename)((0,l.dirname)(s)),{contextMenu:d,menu:g,setMenu:x}=(0,u.H)(),{canGoBack:m,canGoForward:w,history:b,moveHistory:j,position:R}=(0,y.Z)(s,t),B=(0,i.useMemo)(()=>b.map((e,t)=>({action:()=>j(t-R),checked:R===t,label:(0,l.basename)(e)||h.SP,primary:R===t})).reverse(),[b,j,R]),{onContextMenuCapture:z}=(0,i.useMemo)(()=>null==d?void 0:d(()=>B),[d,B]),[M,T]=(0,i.useState)(!1),U=(0,i.useRef)(null),[F,P]=(0,i.useState)(!1),O=(0,i.useCallback)(([{contentRect:e}])=>{let t=e.width<260;F&&!t?P(!1):!F&&t&&P(!0)},[F]);return(0,i.useEffect)(()=>{T(B===g.items)},[g.items,B]),(0,S.Z)(U.current,O),(0,n.jsxs)(E,{ref:U,...(0,C.Z)(t),onDragOver:f.nK,onDrop:f.nK,children:[(0,n.jsx)(p.Z,{disabled:!m,onClick:()=>j(-1),...(0,f.PS)(m?`Back to ${(0,l.basename)(b[R-1])||h.SP}`:"Back"),children:(0,n.jsx)(o.Back,{})}),(0,n.jsx)(p.Z,{disabled:!w,onClick:()=>j(1),...(0,f.PS)(w?`Forward to ${(0,l.basename)(b[R+1])||h.SP}`:"Forward"),children:(0,n.jsx)(o.Forward,{})}),(0,n.jsx)(p.Z,{disabled:1===b.length,onClick:e=>{if(e.preventDefault(),M)x(Object.create(null));else{var t;let{height:r=0,y:n=0,x:l=0}=(null===(t=U.current)||void 0===t?void 0:t.getBoundingClientRect())||{};z(l&&n&&r?{pageX:l,pageY:n+r-3}:e)}},...(0,f.PS)("Recent locations"),children:(0,n.jsx)(o.Down,{})}),(0,n.jsx)(p.Z,{disabled:"/"===s,onClick:()=>a(t,(0,l.dirname)(s)),...(0,f.PS)("/"===s?"Up one level":`Up to "${""===c?h.SP:c}"`),children:(0,n.jsx)(o.Up,{})}),(0,n.jsx)(v,{ref:r,id:t}),!e&&!F&&(0,n.jsx)(k,{id:t})]})});var R=r(33333),B=r(16854),z=r(52547);let M=a.ZP.div(["","{column-gap:2px;height:",";padding-left:5px;padding-right:5px;}","{height:",";}","{&:hover{&::before{border-width:0;}}&::before{border-width:0;}}"],z.Z,({theme:e})=>`calc(100% - ${e.sizes.fileExplorer.navBarHeight} - ${e.sizes.fileExplorer.statusBarHeight})`,R.default,({theme:e})=>`calc(100% - ${e.sizes.fileExplorer.navBarHeight} - ${e.sizes.fileExplorer.statusBarHeight})`,B.Z);var T=r(6155),U=r(54110),F=r(18575),P=({id:e})=>{let{icon:t,title:r,processes:{[e]:o},url:a}=(0,A.z)(),{componentWindow:s,closing:u,icon:c="",url:p=""}=o||{},{fs:g,rootFs:v}=(0,d.o)(),[x,m]=(0,i.useState)(p),w=(0,i.useRef)(null),b=(0,l.basename)(p),k=(0,F.getMountUrl)(p,(null==v?void 0:v.mntMap)||{}),E=(0,i.useCallback)(e=>{if(e.altKey&&"D"===e.key.toUpperCase()){var t;(0,f.nK)(e),null===(t=w.current)||void 0===t||t.focus(h.eS)}},[]);return(0,i.useEffect)(()=>{p&&(r(e,b||h.SP),(!c||p!==x||k&&c!==h.iR||c===h.XN)&&(k&&p===k?t(e,(0,F.isMountedFolder)(null==v?void 0:v.mntMap[p])?h.iR:h.Wc):g&&(t(e,`/System/Icons/${b?"folder":"pc"}.webp`),(0,T.nR)(g,p).then(r=>{r&&t(e,r)})),m(p)))},[x,b,g,c,e,k,null==v?void 0:v.mntMap,t,r,p]),(0,i.useEffect)(()=>{!s||u||p||(a(e,"/"),t(e,"/daedal-os/System/Icons/pc.webp"))},[u,e,s,t,a,p]),(0,i.useEffect)(()=>(null==s||s.addEventListener("keydown",E),()=>null==s?void 0:s.removeEventListener("keydown",E)),[s,E]),p?(0,n.jsxs)(M,{children:[(0,n.jsx)(j,{ref:w,hideSearch:!!k,id:e}),(0,n.jsx)(U.Z,{id:e,url:p,view:"icon",showStatusBar:!0})]}):null}},33333:function(e,t,r){r.r(t);let n=r(10508).ZP.div(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}']);t.default=n},93949:function(e,t,r){r.d(t,{A4:function(){return s},VD:function(){return u},r5:function(){return c}});var n=r(1864),l=r(43950),i=r(6155),o=r(97836),a=r(6484);let s=async(e,t,r)=>{if(!e)return;let{subIcons:l,icon:s,pid:u=o.yV[0],url:c}=await new Promise(r=>{e.lstat(t,(n,l)=>{let o=!n&&!!l&&l.isDirectory(),s=(0,a.RT)(t);s&&!o?(0,i.Z7)(e,t,s,e=>r(e)):(0,i.g7)(e,e.getRootFS(),t,o,!1,e=>r(e),!1)})});if(null==r?void 0:r.aborted)return;let d=(0,a.yk)(c);return{icon:await (0,i.kv)(e,(0,n.join)(d?o.Rm:o.Xo,`${d?new URL(c).pathname.replace("/",""):c}${o.Qy}`))||s,pid:u,subIcons:(null==l?void 0:l.includes(o.EV))?l:[],url:c||t}},u=(e,t)=>{let r=0===e.value.length,n=()=>{var r,n;null===(n=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value"))||void 0===n||null===(r=n.set)||void 0===r||r.call(e,t),e.dispatchEvent(new Event("input",{bubbles:!0}))};n(),requestAnimationFrame(()=>r&&1===t.length&&2===e.value.length&&n())},c=(e,t,r,n,i)=>{var o;return i?"Nostr URI":n?"App":r?"YouTube Video":(null==e?void 0:e.isDirectory())||!t?"File folder":(null===(o=l.Z[t])||void 0===o?void 0:o.type)||`${t.toUpperCase().replace(".","")} File`}},64146:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(67294),l=r(23561),i=r(7502),o=r(58437),a=r(97836),s=r(76488),u=e=>{let{contextMenu:t}=(0,i.H)(),{onClose:r,onMaximize:u,onMinimize:c}=(0,l.Z)(e),{processes:{[e]:d}}=(0,o.z)(),{setForegroundId:A}=(0,s.k)(),{allowResizing:p=!0,componentWindow:g,hideMaximizeButton:h,hideMinimizeButton:f,maximized:v,minimized:x}=d||{},m=(0,n.useCallback)(()=>{A(e),null==g||g.focus(a.eS)},[g,e,A]);return(0,n.useMemo)(()=>null==t?void 0:t(()=>{let e=v||x,t=!h||!f;return[t&&{action:()=>{x?c():u(),m()},disabled:!e,icon:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAOklEQVR4AWMYVmA2BiBN/6JFi3DKrcUAEEGcGnZiAIggTg1HwQCNDSSpp+H8hQtoiECAXMcADMMbAABMtF75qvi0qwAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJElEQVR42mNABaPA09PzPzZMsaFk20x/A2D8gTIAE9Mp+kYBAJPzT5+OMe9rAAAAAElFTkSuQmCC",label:"Restore"},!f&&{action:c,disabled:x,icon:x?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGElEQVR42mMYPGAUjAJPT8//+DCNDRgFAPTaHaFVv24VAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIUlEQVR42mMYPGAUjIIDBw78x4cJGnDu3Ln/+DB+3aMAAPFzNUFuAVJEAAAAAElFTkSuQmCC",label:"Minimize"},!h&&{action:()=>{u(),m()},disabled:e||!p,icon:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mOgEhgFnp6e//Fh+hmALj5UDBj4QBwFANQKUXn4YyGJAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAR0lEQVR42u3IoRHAMAzFUO+/gllKG5IgD2DujX4vC8ikMO9ORHb9xN1FWWc8Q5R15jt1gs/22jrBZxGhE3yWmaKsU1Wi7EIfHneIsXEKuhAAAAAASUVORK5CYII=",label:"Maximize"},t&&a.Os,{action:r,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAMElEQVR4AWMgEoyC2TCAwsYPFqMCouzZCQPEOmzvnj0QRJTqo6iAgOoLMIDCHsYAACjTO7/gCQlBAAAAAElFTkSuQmCC",label:"Close"}].filter(Boolean)}),[p,t,m,h,f,v,x,r,u,c])}},23561:function(e,t,r){var n=r(67294),l=r(67318),i=r(58437),o=r(76488),a=r(86178),s=r(97836);t.Z=e=>{let t=(0,l.Z)(e),{setForegroundId:r,removeFromStack:u}=(0,o.k)(),{closeWithTransition:c,maximize:d,minimize:A}=(0,i.z)(),p=(0,a.R)(),g=(0,n.useCallback)(()=>{A(e),r(t)},[e,A,t,r]),h=(0,n.useCallback)(()=>{var t,r;d(e),null===(r=p.current[e])||void 0===r||null===(t=r.componentWindow)||void 0===t||t.focus(s.eS)},[e,d,p]);return{onClose:(0,n.useCallback)(()=>{u(e),c(e),r(t)},[c,e,t,u,r]),onMaximize:h,onMinimize:g}}},67318:function(e,t,r){var n=r(58437),l=r(76488);t.Z=e=>{let{stackOrder:t=[]}=(0,l.k)(),{processes:r}=(0,n.z)();return t.find(t=>{var n;return t!==e&&!(null==r?void 0:null===(n=r[t])||void 0===n?void 0:n.minimized)})||""}},32221:function(e,t,r){var n=r(67294),l=r(58437);t.Z=(e,t)=>{let{url:r}=(0,l.z)(),[i,o]=(0,n.useState)(e),[a,s]=(0,n.useState)(()=>[e]),[u,c]=(0,n.useState)(0),d=(0,n.useCallback)(e=>{let n=u+e;c(n),o(a[n]),r(t,a[n])},[r,a,t,u]);return(0,n.useEffect)(()=>{e!==i&&(c(u+1),o(e),s([...a.slice(0,u+1),e]))},[i,a,u,e]),{canGoBack:u>0,canGoForward:u<a.length-1,currentUrl:i,history:a,moveHistory:d,position:u}}},72490:function(e,t,r){var n=r(67294);t.Z=(e,t)=>{let[r,l]=(0,n.useState)();(0,n.useEffect)(()=>{t&&l(new ResizeObserver(t))},[t]),(0,n.useEffect)(()=>(e instanceof HTMLElement&&(null==r||r.observe(e)),()=>{e instanceof HTMLElement&&(null==r||r.unobserve(e))}),[e,r])}},82883:function(e,t,r){r.d(t,{cM:function(){return u},hZ:function(){return d},VU:function(){return c},Kk:function(){return f},Rx:function(){return v}});var n=r(1864),l=r(67294),i=r(20063),o=JSON.parse('{"I":[".cache",".json"],"K":[".md",".txt",".whtml"]}'),a=r(97836),s=r(6484);let u="/.index/search.lunr.json",c="/daedal-os/System/lunr/lunr.min.js",d={enterKeyHint:"search",inputMode:"search",type:"search",...a.AA},A=Object.create(null),p=[],g=async(e,t)=>{var r,n,l;if(window.lunr||await (0,s.mb)([c]),!t&&!(null==A?void 0:A.search)){let e=await fetch(u,a.P8);try{let{paths:t,...n}=JSON.parse(await e.text());A=null===(r=window.lunr)||void 0===r?void 0:r.Index.load(n),p=t}catch{}}let i=t??A,o=[],d=e.trim().replace(/\./g," ").replace(/\*~\^-\+/g,"");try{(null==(o=null===(n=i.search)||void 0===n?void 0:n.call(i,d))?void 0:o.length)===0&&(o=null===(l=i.search)||void 0===l?void 0:l.call(i,`${d.split(" ").join("* ")}*`))}catch{}return o?o.map(e=>({...e,ref:(Object.prototype.hasOwnProperty.call(p,e.ref)?p[e.ref]:e.ref)||""})):[]},h=async(e,t)=>{var r,l,i,a,u,c,d;let A=null==t?void 0:null===(r=t._getFs("/"))||void 0===r?void 0:r.fs,p=null==A?void 0:A.getOverlayedFileSystems(),g=null==p?void 0:p.writable,h=("function"==typeof(null==g?void 0:null===(i=g._cache)||void 0===i?void 0:null===(l=i.map)||void 0===l?void 0:l.keys)&&[...g._cache.map.keys()]||Object.keys((null==g?void 0:null===(a=g._cache)||void 0===a?void 0:a.map)||{})||[]).filter(e=>{let t=(0,s.RT)(e);return!!t&&!o.I.includes(t)}),f=await Promise.all(h.map(async t=>{let r=(0,n.basename)(t,(0,n.extname)(t));return{name:r,path:t,text:o.K.includes((0,s.RT)(t))?`${r} ${(await e(t)).toString()}`:r}})),v=null===(u=(c=window).lunr)||void 0===u?void 0:u.call(c,function(){this.ref("path"),this.field("name"),this.field("text"),f.forEach(e=>this.add(e))});return null===(d=window.lunr)||void 0===d?void 0:d.Index.load(v.toJSON())},f=async(e,t,r)=>{let n=await g(e),l=await h(t,r);return[...n,...await g(e,l)].sort((e,t)=>t.score-e.score)},v=e=>{let[t,r]=(0,l.useState)([]),{readFile:n,rootFs:o}=(0,i.o)();return(0,l.useEffect)(()=>{(async()=>{e.length>0?(window.lunr||await (0,s.mb)([c]),g(e).then(r),h(n,o).then(t=>g(e,t).then(e=>r(t=>[...t,...e].sort((e,t)=>t.score-e.score))))):r([])})()},[n,o,e]),t}}}]);