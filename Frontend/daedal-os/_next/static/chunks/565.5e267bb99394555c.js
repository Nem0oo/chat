"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{80565:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var i=r(85893),l=r(1864),o=r(67294),n=r(7502),a=(e,t,r)=>{let{contextMenu:i}=(0,n.H)();return{backMenu:(0,o.useMemo)(()=>null==i?void 0:i(()=>e.filter((e,r)=>r<t).map((e,i)=>({action:()=>r(i-t),label:e})).reverse()),[i,e,r,t]),forwardMenu:(0,o.useMemo)(()=>null==i?void 0:i(()=>e.filter((e,r)=>r>t).map((e,t)=>({action:()=>r(t+1),label:e}))),[i,e,r,t])}},s=()=>{let{contextMenu:e}=(0,n.H)();return(0,o.useMemo)(()=>null==e?void 0:e(e=>[{action:()=>{var t;return null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.dispatchEvent(new MouseEvent("click",{bubbles:!0,ctrlKey:!0}))},label:"Open in new window"}]),[e])},c=r(43950),d=r(6484),u=r(97836);let h="/daedal-os/Program Files/Browser/directory/icons",p={"FutureSplash File":"portal","HTML Document":"layout","Media Playlist File":"movie","Picture File":"image2","Shockwave Flash File":"portal",audio:"sound2",compressed:"compressed",emulator:"portal",executable:"binary",font:"a",image:"diskimg",jsdos:"compressed",marked:"layout",pdf:"layout",python:"p",tinymce:"layout",wapm:"binary"},f={...Object.fromEntries(Object.entries(c.Z).map(([e,{icon:t="",type:r=""}])=>[e,p[t||r]||"generic"])),".7z":"compressed",".gz":"compressed",".ini":"text",".js":"text",".json":"text",".pk3":"compressed",".rar":"compressed",".sh":"script",".tar":"tar",".tgz":"compressed",".txt":"text",".url":"link",".wsz":"compressed"},m={back:"PARENTDIR",folder:"DIR",image2:"IMG",movie:"VID",text:"TXT"},g=e=>{if(void 0===e)return" - ";let t=["","K","M","G","T"],r=Math.floor((e?Math.log(e):0)/Math.log(1024)),i=e/1024**(r=Math.min(r,t.length-1)),l=Number(i=i>=100?Math.round(i):Math.round(10*i)/10).toString();return l.length>3&&(l=Number(Math.round(i)).toString()),l+(0!==i&&i<10&&i%1==0?".0":"")+t[r]},v=e=>(null==e?void 0:e.toISOString().replace("T"," ").split(".")[0].slice(0,-3))||"",b=(e,t,{C:r,O:i},o)=>`
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <title>Index of ${e}</title>
      <style>
        a:visited { color: #00e; }
        img { display: block; }
      </style>
    </head>
    <body>
      <h1>Index of ${e}</h1>
      <table>
        <tr>
          <th valign="top"><img decoding="async" src="${h}/blank.gif" alt="[ICO]" /></th>
          <th><a href="${t}?C=N;O=${r&&("N"!==r||"A"!==i)?"A":"D"}">Name</a></th><th><a href="${t}?C=M;O=${"M"===r&&"A"===i?"D":"A"}">Last modified</a></th>
          <th><a href="${t}?C=S;O=${"S"===r&&"A"===i?"D":"A"}">Size</a></th><th><a href="${t}?C=D;O=${"D"===r&&"A"===i?"D":"A"}">Description</a></th>
        </tr>
        <tr>
          <th colspan="5"><hr /></th>
        </tr>
        ${o.map(({alt:e,description:r,href:i,icon:o,modified:n,size:a})=>{let s=o||f[(0,d.RT)(i)]||"generic",c="back"===s,p=c||"folder"===s?"folder":"file",b=c?"Parent Directory":"/"===i?u.SP:(0,l.basename)(i);return`
              <tr>
                <td valign="top">
                  <a href="${t}${i}" type=${p}>
                    <img decoding="async" src="${h}/${s}.gif" alt="[${m[s]||e||"   "}]">
                  </a>
                </td>
                <td>
                  <a href="${t}${i}" type=${p}>${b}${"folder"===s?"/":""}</a>
                </td>
                <td align="right">${v(n)}</td>
                <td align="right">${g(a)}</td>
                <td>${r||"&nbsp;"}</td>
              </tr>`}).join("")}
          <tr><th colspan="5"><hr /></th></tr>
      </table>
    </body>
  </html>
`,x=(0,o.memo)(({direction:e})=>{let t=(0,o.useMemo)(()=>"right"===e?{transform:"scaleX(-1)"}:void 0,[e]);return(0,i.jsx)("svg",{style:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),w=(0,o.memo)(()=>(0,i.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})),$=(0,o.memo)(()=>(0,i.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})),y=r(10508).ZP.div(["iframe{background-color:",";border:0;height:calc(100% - 42px - 37px);width:100%;}nav{background-color:rgb(87,87,87);display:flex;padding:4px 0;place-content:center;place-items:center;div{display:flex;justify-content:space-around;margin-right:2px;min-width:102px;padding-left:4px;width:142px;}button{border-radius:50%;display:flex;height:28px;place-content:center;place-items:center;transition:background 0.2s ease-in-out;width:28px;svg{fill:rgb(240,240,240);height:20px;width:20px;}&:hover{background-color:rgb(103,103,103);}&:active{background-color:rgb(110,110,110);}&:disabled{background-color:inherit;svg{fill:rgb(152,152,152);}}}&:not(:first-child){border-bottom:1px solid rgb(118,115,118);height:37px;justify-content:left;padding:0 8px;button{margin-bottom:4px;margin-right:8px;}}input{background-color:rgb(64,62,65);border-radius:18px;color:rgb(255,255,255);font-family:",";font-size:13px;height:34px;letter-spacing:0.2px;margin:0 6px;padding:0 13px;padding-bottom:2px;width:100%;&:focus{outline:2px solid rgb(168,199,250);}&::selection{background-color:rgb(0,74,119);}}}"],({$hasSrcDoc:e})=>e?"#fff":"initial",({theme:e})=>e.formats.systemFont);var k=r(61929),j=r(44696),S=r(20063),M=r(58437),C=r(37176),D=r(32221),T=r(67278),E=r(46581),R=r(6155),z=r(76488),F=({id:e})=>{let{icon:t,linkElement:r,url:n,processes:{[e]:c},open:h}=(0,M.z)(),{setForegroundId:p}=(0,z.k)(),{prependFileToTitle:f}=(0,j.Z)(e),{initialTitle:m="",url:g=""}=c||{},v=g||k.s6,{canGoBack:F,canGoForward:L,history:A,moveHistory:I,position:N}=(0,D.Z)(v,e),{exists:P,fs:O,stat:Z,readFile:G,readdir:K}=(0,S.o)(),B=(0,o.useRef)(null),H=(0,o.useRef)(null),[U,W]=(0,o.useState)(!1),[Y,_]=(0,o.useState)(""),V=e=>{I(e),B.current&&(B.current.value=A[N+e])},X=(0,o.useRef)(""),q=(e,t)=>{var r,i,l;let o=!1;try{o=(null===(r=t.location)||void 0===r?void 0:r.pathname)==="srcdoc"}catch{}o?(_(""),null===(i=H.current)||void 0===i||i.setAttribute("src",e)):null===(l=t.location)||void 0===l||l.replace(e)},Q=(0,o.useCallback)(t=>{B.current&&(B.current.value=t),n(e,t)},[n,e]),{backMenu:J,forwardMenu:ee}=a(A,N,I),et=s(),er=(0,o.useCallback)(async r=>{let{contentWindow:i}=H.current||{};if(null==i?void 0:i.location){let n=[".htm",".html"].includes((0,d.RT)(r))&&await P(r);if(W(!0),n&&_((await G(r)).toString()),t(e,C.Z.Browser.icon),r.toLowerCase().startsWith(k.FY.url))q(`${window.location.origin}${k.FY.path}`,i),f(`${k.FY.url}/`);else if(!n){let n=await (0,d.Qv)(r);if(k.KM.has(n.host)||k.KM.has(r)){let e=decodeURI(n.pathname).replace(/\/$/,"")||"/",t=Object.fromEntries(new URLSearchParams(n.search.replace(";","&")).entries()),{O:r,C:a}=t,s=!r||"A"===r,c=k.Hi,p="404 Not Found";if(await P(e)&&(await Z(e)).isDirectory()){var o;let r=(await Promise.all((await K(e)).map(async t=>{let r,i;let o=(0,l.join)(e,t);if((0,d.RT)(t)===u.zm)try{({comment:r,url:i}=(0,R.OE)(await G(o)))}catch{}let n=await Z(i&&await P(i)?i:o),a=n.isDirectory();return{description:r,href:a&&i?i:o,icon:a?"folder":void 0,modified:n.mtime,size:a||i?void 0:n.size}}))).sort((e,t)=>Number("folder"===t.icon)-Number("folder"===e.icon)).sort((e,t)=>{if("folder"===e.icon==("folder"===t.icon)){let r=(0,l.basename)(e.href),i=(0,l.basename)(t.href);return s?r<i?-1:1:r>i?-1:1}return 0}).sort((e,t)=>{if(!a||"N"===a)return 0;let r=r=>{let i=r(e),l=r(t);return i===l?0:s?i<l?-1:1:i>l?-1:1};return"S"===a?r(({size:e})=>e??0):"M"===a?r(({modified:e})=>(null==e?void 0:e.getTime())??0):"D"===a?r(({description:e})=>e??""):0}).sort((e,t)=>Number("folder"===t.icon)-Number("folder"===e.icon));null===(o=H.current)||void 0===o||o.addEventListener("load",()=>{try{i.document.body.querySelectorAll("a").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();let r=t.currentTarget,i="folder"===r.getAttribute("type"),{origin:l,pathname:o,search:n}=new URL(r.href);n?Q(`${l}${encodeURI(e)}${n}`):i?Q(r.href):O&&r.href&&(0,R.Z7)(O,decodeURI(o),(0,d.RT)(o),({pid:e,url:t})=>h(e||"OpenWith",{url:t}))})})}catch{}},u.K7),c=b(e,n.origin,t,"/"===e?r:[{href:(0,l.resolve)(e,".."),icon:"back"},...r]),p=`Index of ${e}`}_(c),f(p)}else{let l=n.href;if(q(l,i),l.startsWith(d.z8))f(`${r} - Google Search`);else{let{name:e=m}=(null===k.hG||void 0===k.hG?void 0:k.hG.find(({url:e})=>e===r))||{};f(e)}if(r.startsWith("ipfs://"))t(e,"/daedal-os/System/Icons/Favicons/ipfs.webp");else{let r=new Image,i=`${new URL(l).origin}${u.Yg}`;r.addEventListener("error",()=>{let{icon:r}=(null===k.hG||void 0===k.hG?void 0:k.hG.find(({url:e})=>e===l))||{};r&&t(e,r)},u.K7),r.addEventListener("load",()=>t(e,i),u.K7),r.src=i}}}}},[P,O,Q,e,m,h,f,G,K,t,Z]);return(0,o.useEffect)(()=>{c&&A[N]!==X.current&&(X.current=A[N],er(A[N]))},[A,N,c,er]),(0,o.useEffect)(()=>{H.current&&r(e,"peekElement",H.current)},[e,r]),(0,i.jsxs)(y,{$hasSrcDoc:!!Y,children:[(0,i.jsxs)("nav",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(T.Z,{disabled:!F,onClick:()=>V(-1),...(0,d.PS)("Click to go back"),...J,children:(0,i.jsx)(x,{direction:"left"})}),(0,i.jsx)(T.Z,{disabled:!L,onClick:()=>V(1),...(0,d.PS)("Click to go forward"),...ee,children:(0,i.jsx)(x,{direction:"right"})}),(0,i.jsx)(T.Z,{disabled:U,onClick:()=>er(A[N]),...(0,d.PS)("Reload this page"),children:U?(0,i.jsx)($,{}):(0,i.jsx)(w,{})})]}),(0,i.jsx)("input",{ref:B,defaultValue:v,enterKeyHint:"go",onFocusCapture:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.select()},onKeyDown:({key:t})=>{if(B.current&&"Enter"===t){var r;n(e,B.current.value),X.current===B.current.value&&er(B.current.value),null===(r=window.getSelection())||void 0===r||r.removeAllRanges(),B.current.blur()}},type:"text"})]}),(0,i.jsx)("nav",{children:k.hG.map(({name:e,icon:t,url:r})=>(0,i.jsx)(T.Z,{onClick:({ctrlKey:e})=>{e?h("Browser",{url:r}):Q(r)},...(0,d.PS)(`${e}
${r.replace(/^http:\/\//,"").replace(/\/$/,"")}`),...et,children:(0,i.jsx)(E.Z,{alt:e,imgSize:16,src:t})},e))}),(0,i.jsx)("iframe",{ref:H,onLoad:()=>{try{var t,r;null===(r=H.current)||void 0===r||null===(t=r.contentWindow)||void 0===t||t.addEventListener("focus",()=>p(e))}catch{}U&&W(!1)},srcDoc:Y||void 0,title:e,...u.v0})]})}},44696:function(e,t,r){var i=r(67294),l=r(58437),o=r(37176),n=r(97836);t.Z=e=>{let{title:t}=(0,l.z)(),[r]=e.split(n.CC),{title:a}=o.Z[r]||{};return{appendFileToTitle:(0,i.useCallback)((r,i)=>{let l=r?` - ${r}${i?` ${n.xy}`:""}`:"";t(e,`${a}${l}`)},[e,a,t]),prependFileToTitle:(0,i.useCallback)((r,i,l)=>{let o=r?`${i?`${n.xy} `:""}${r}${l?" ":" - "}`:"";t(e,`${o}${a}`)},[e,a,t])}}},32221:function(e,t,r){var i=r(67294),l=r(58437);t.Z=(e,t)=>{let{url:r}=(0,l.z)(),[o,n]=(0,i.useState)(e),[a,s]=(0,i.useState)(()=>[e]),[c,d]=(0,i.useState)(0),u=(0,i.useCallback)(e=>{let i=c+e;d(i),n(a[i]),r(t,a[i])},[r,a,t,c]);return(0,i.useEffect)(()=>{e!==o&&(d(c+1),n(e),s([...a.slice(0,c+1),e]))},[o,a,c,e]),{canGoBack:c>0,canGoForward:c<a.length-1,currentUrl:o,history:a,moveHistory:u,position:c}}}}]);